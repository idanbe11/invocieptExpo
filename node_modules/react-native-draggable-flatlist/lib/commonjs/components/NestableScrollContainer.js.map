{"version":3,"names":["AnimatedScrollView","Animated","createAnimatedComponent","ScrollView","NestableScrollContainerInner","props","useSafeNestableScrollContainerContext","outerScrollOffset","containerSize","scrollViewSize","scrollableRef","outerScrollEnabled","onScroll","useAnimatedScrollHandler","contentOffset","value","y","onLayout","useStableCallback","event","layout","nativeEvent","height","onContentSizeChange","w","h","NestableScrollContainer"],"sources":["NestableScrollContainer.tsx"],"sourcesContent":["import React from \"react\";\nimport { LayoutChangeEvent, ScrollViewProps } from \"react-native\";\nimport { ScrollView } from \"react-native-gesture-handler\";\nimport Animated, { useAnimatedScrollHandler } from \"react-native-reanimated\";\nimport {\n  NestableScrollContainerProvider,\n  useSafeNestableScrollContainerContext,\n} from \"../context/nestableScrollContainerContext\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\n\nconst AnimatedScrollView = Animated.createAnimatedComponent(ScrollView);\n\nfunction NestableScrollContainerInner(props: ScrollViewProps) {\n  const {\n    outerScrollOffset,\n    containerSize,\n    scrollViewSize,\n    scrollableRef,\n    outerScrollEnabled,\n  } = useSafeNestableScrollContainerContext();\n\n  const onScroll = useAnimatedScrollHandler({\n    onScroll: ({ contentOffset }) => {\n      outerScrollOffset.value = contentOffset.y;\n    },\n  });\n\n  const onLayout = useStableCallback((event: LayoutChangeEvent) => {\n    const {\n      nativeEvent: { layout },\n    } = event;\n    containerSize.value = layout.height;\n  });\n\n  const onContentSizeChange = useStableCallback((w: number, h: number) => {\n    scrollViewSize.value = h;\n    props.onContentSizeChange?.(w, h);\n  });\n\n  return (\n    <AnimatedScrollView\n      {...props}\n      onLayout={onLayout}\n      onContentSizeChange={onContentSizeChange}\n      scrollEnabled={outerScrollEnabled}\n      ref={scrollableRef}\n      scrollEventThrottle={1}\n      onScroll={onScroll}\n    />\n  );\n}\n\nexport function NestableScrollContainer(props: ScrollViewProps) {\n  return (\n    <NestableScrollContainerProvider>\n      <NestableScrollContainerInner {...props} />\n    </NestableScrollContainerProvider>\n  );\n}\n"],"mappings":"oRAAA,oDAEA,uEACA,uFACA,yFAIA,6D,2nCAEA,GAAMA,mBAAkB,CAAGC,8BAAA,CAASC,uBAAT,CAAiCC,qCAAjC,CAA3B,CAEA,QAASC,6BAAT,CAAsCC,KAAtC,CAA8D,2BAOxD,GAAAC,qEAAA,GAPwD,CAE1DC,iBAF0D,uBAE1DA,iBAF0D,CAG1DC,aAH0D,uBAG1DA,aAH0D,CAI1DC,cAJ0D,uBAI1DA,cAJ0D,CAK1DC,aAL0D,uBAK1DA,aAL0D,CAM1DC,kBAN0D,uBAM1DA,kBAN0D,CAS5D,GAAMC,SAAQ,CAAG,GAAAC,+CAAA,EAAyB,CACxCD,QAAQ,oCAAyB,IAApBE,cAAoB,MAApBA,aAAoB,CAC/BP,iBAAiB,CAACQ,KAAlB,CAA0BD,aAAa,CAACE,CAAxC,CACD,CAFO,gCAlBVT,iBAkBU,kUADgC,CAAzB,CAAjB,CAMA,GAAMU,SAAQ,CAAG,GAAAC,oCAAA,EAAkB,SAACC,KAAD,CAA8B,IAE9CC,OAF8C,CAG3DD,KAH2D,CAE7DE,WAF6D,CAE9CD,MAF8C,CAI/DZ,aAAa,CAACO,KAAd,CAAsBK,MAAM,CAACE,MAA7B,CACD,CALgB,CAAjB,CAOA,GAAMC,oBAAmB,CAAG,GAAAL,oCAAA,EAAkB,SAACM,CAAD,CAAYC,CAAZ,CAA0B,CACtEhB,cAAc,CAACM,KAAf,CAAuBU,CAAvB,CACApB,KAAK,CAACkB,mBAAN,cAAAlB,KAAK,CAACkB,mBAAN,CAA4BC,CAA5B,CAA+BC,CAA/B,EACD,CAH2B,CAA5B,CAKA,MACE,8BAAC,kBAAD,0BACMpB,KADN,EAEE,QAAQ,CAAEY,QAFZ,CAGE,mBAAmB,CAAEM,mBAHvB,CAIE,aAAa,CAAEZ,kBAJjB,CAKE,GAAG,CAAED,aALP,CAME,mBAAmB,CAAE,CANvB,CAOE,QAAQ,CAAEE,QAPZ,6EADF,CAWD,CAEM,QAASc,wBAAT,CAAiCrB,KAAjC,CAAyD,CAC9D,MACE,8BAAC,+DAAD,6EACE,6BAAC,4BAAD,0BAAkCA,KAAlC,8EADF,CADF,CAKD"}