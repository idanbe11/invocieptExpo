{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar react_native_gesture_handler_1 = require(\"react-native-gesture-handler\");\n\nvar react_native_reanimated_1 = __importStar(require(\"react-native-reanimated\"));\n\nvar CellRendererComponent_1 = __importDefault(require(\"./CellRendererComponent\"));\n\nvar constants_1 = require(\"../constants\");\n\nvar PlaceholderItem_1 = __importDefault(require(\"./PlaceholderItem\"));\n\nvar RowItem_1 = __importDefault(require(\"./RowItem\"));\n\nvar ScrollOffsetListener_1 = __importDefault(require(\"./ScrollOffsetListener\"));\n\nvar useAutoScroll_1 = require(\"../hooks/useAutoScroll\");\n\nvar useNode_1 = require(\"../hooks/useNode\");\n\nvar propsContext_1 = __importDefault(require(\"../context/propsContext\"));\n\nvar animatedValueContext_1 = __importStar(require(\"../context/animatedValueContext\"));\n\nvar refContext_1 = __importStar(require(\"../context/refContext\"));\n\nvar draggableFlatListContext_1 = __importDefault(require(\"../context/draggableFlatListContext\"));\n\nvar AnimatedFlatList = react_native_reanimated_1.default.createAnimatedComponent(react_native_gesture_handler_1.FlatList);\n\nfunction DraggableFlatListInner(props) {\n  var _a = (0, refContext_1.useRefs)(),\n      cellDataRef = _a.cellDataRef,\n      containerRef = _a.containerRef,\n      flatListRef = _a.flatListRef,\n      isTouchActiveRef = _a.isTouchActiveRef,\n      keyToIndexRef = _a.keyToIndexRef,\n      panGestureHandlerRef = _a.panGestureHandlerRef,\n      propsRef = _a.propsRef,\n      scrollOffsetRef = _a.scrollOffsetRef;\n\n  var _b = (0, animatedValueContext_1.useAnimatedValues)(),\n      activationDistance = _b.activationDistance,\n      activeCellOffset = _b.activeCellOffset,\n      activeCellSize = _b.activeCellSize,\n      activeIndexAnim = _b.activeIndexAnim,\n      containerSize = _b.containerSize,\n      disabled = _b.disabled,\n      panGestureState = _b.panGestureState,\n      resetTouchedCell = _b.resetTouchedCell,\n      scrollOffset = _b.scrollOffset,\n      scrollViewSize = _b.scrollViewSize,\n      spacerIndexAnim = _b.spacerIndexAnim,\n      touchAbsolute = _b.touchAbsolute,\n      touchInit = _b.touchInit;\n\n  var _c = props.dragHitSlop,\n      dragHitSlop = _c === void 0 ? constants_1.DEFAULT_PROPS.dragHitSlop : _c,\n      _d = props.scrollEnabled,\n      scrollEnabled = _d === void 0 ? constants_1.DEFAULT_PROPS.scrollEnabled : _d,\n      _e = props.activationDistance,\n      activationDistanceProp = _e === void 0 ? constants_1.DEFAULT_PROPS.activationDistance : _e;\n\n  var _f = (0, react_1.useState)(null),\n      activeKey = _f[0],\n      setActiveKey = _f[1];\n\n  var keyExtractor = (0, react_1.useCallback)(function (item, index) {\n    if (propsRef.current.keyExtractor) return propsRef.current.keyExtractor(item, index);else throw new Error(\"You must provide a keyExtractor to DraggableFlatList\");\n  }, [propsRef]);\n  (0, react_1.useLayoutEffect)(function () {\n    props.data.forEach(function (d, i) {\n      var key = keyExtractor(d, i);\n      keyToIndexRef.current.set(key, i);\n    });\n  }, [props.data, keyExtractor, keyToIndexRef]);\n  var drag = (0, react_1.useCallback)(function (activeKey) {\n    if (!isTouchActiveRef.current.js) return;\n    var index = keyToIndexRef.current.get(activeKey);\n    var cellData = cellDataRef.current.get(activeKey);\n\n    if (cellData) {\n      activeCellOffset.setValue(cellData.measurements.offset - scrollOffsetRef.current);\n      activeCellSize.setValue(cellData.measurements.size);\n    }\n\n    var onDragBegin = propsRef.current.onDragBegin;\n\n    if (index !== undefined) {\n      spacerIndexAnim.setValue(index);\n      activeIndexAnim.setValue(index);\n      setActiveKey(activeKey);\n      onDragBegin === null || onDragBegin === void 0 ? void 0 : onDragBegin(index);\n    }\n  }, [isTouchActiveRef, keyToIndexRef, cellDataRef, propsRef, activeCellOffset, scrollOffsetRef, activeCellSize, spacerIndexAnim, activeIndexAnim]);\n  var autoScrollNode = (0, useAutoScroll_1.useAutoScroll)();\n\n  var onContainerLayout = function onContainerLayout(_a) {\n    var layout = _a.nativeEvent.layout;\n    containerSize.setValue(props.horizontal ? layout.width : layout.height);\n  };\n\n  var onListContentSizeChange = function onListContentSizeChange(w, h) {\n    var _a;\n\n    scrollViewSize.setValue(props.horizontal ? w : h);\n    (_a = props.onContentSizeChange) === null || _a === void 0 ? void 0 : _a.call(props, w, h);\n  };\n\n  var onContainerTouchStart = function onContainerTouchStart() {\n    isTouchActiveRef.current.js = true;\n    isTouchActiveRef.current.native.setValue(1);\n    return false;\n  };\n\n  var onContainerTouchEnd = function onContainerTouchEnd() {\n    isTouchActiveRef.current.js = false;\n    isTouchActiveRef.current.native.setValue(0);\n  };\n\n  var dynamicProps = {};\n\n  if (activationDistanceProp) {\n    var activeOffset = [-activationDistanceProp, activationDistanceProp];\n    dynamicProps = props.horizontal ? {\n      activeOffsetX: activeOffset\n    } : {\n      activeOffsetY: activeOffset\n    };\n  }\n\n  var extraData = (0, react_1.useMemo)(function () {\n    return {\n      activeKey: activeKey,\n      extraData: props.extraData\n    };\n  }, [activeKey, props.extraData]);\n  var renderItem = (0, react_1.useCallback)(function (_a) {\n    var item = _a.item,\n        index = _a.index;\n    var key = keyExtractor(item, index);\n    if (index !== keyToIndexRef.current.get(key)) keyToIndexRef.current.set(key, index);\n    return react_1.default.createElement(RowItem_1.default, {\n      item: item,\n      itemKey: key,\n      renderItem: props.renderItem,\n      drag: drag,\n      extraData: props.extraData\n    });\n  }, [props.renderItem, props.extraData, drag, keyExtractor]);\n  var resetHoverState = (0, react_1.useCallback)(function () {\n    activeIndexAnim.setValue(-1);\n    spacerIndexAnim.setValue(-1);\n    touchAbsolute.setValue(0);\n    disabled.setValue(0);\n    requestAnimationFrame(function () {\n      setActiveKey(null);\n    });\n  }, [activeIndexAnim, spacerIndexAnim, touchAbsolute, disabled]);\n\n  var onRelease = function onRelease(_a) {\n    var _b;\n\n    var index = _a[0];\n    isTouchActiveRef.current.native.setValue(0);\n    (_b = props.onRelease) === null || _b === void 0 ? void 0 : _b.call(props, index);\n  };\n\n  var onDragEnd = (0, react_1.useCallback)(function (_a) {\n    var from = _a[0],\n        to = _a[1];\n    var _b = propsRef.current,\n        onDragEnd = _b.onDragEnd,\n        data = _b.data;\n\n    if (onDragEnd) {\n      var newData = __spreadArray([], data, true);\n\n      if (from !== to) {\n        newData.splice(from, 1);\n        newData.splice(to, 0, data[from]);\n      }\n\n      onDragEnd({\n        from: from,\n        to: to,\n        data: newData\n      });\n    }\n\n    resetHoverState();\n  }, [resetHoverState, propsRef]);\n  var onGestureRelease = (0, useNode_1.useNode)((0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.greaterThan)(activeIndexAnim, -1), [(0, react_native_reanimated_1.set)(disabled, 1), (0, react_native_reanimated_1.set)(isTouchActiveRef.current.native, 0), (0, react_native_reanimated_1.call)([activeIndexAnim], onRelease)], [(0, react_native_reanimated_1.call)([activeIndexAnim], resetHoverState), resetTouchedCell]));\n  var onPanStateChange = (0, react_1.useMemo)(function () {\n    return (0, react_native_reanimated_1.event)([{\n      nativeEvent: function nativeEvent(_a) {\n        var state = _a.state,\n            x = _a.x,\n            y = _a.y;\n        return (0, react_native_reanimated_1.block)([(0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.and)((0, react_native_reanimated_1.neq)(state, panGestureState), (0, react_native_reanimated_1.not)(disabled)), [(0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.or)((0, react_native_reanimated_1.eq)(state, react_native_gesture_handler_1.State.BEGAN), (0, react_native_reanimated_1.and)((0, react_native_reanimated_1.eq)(state, react_native_gesture_handler_1.State.ACTIVE), (0, react_native_reanimated_1.neq)(panGestureState, react_native_gesture_handler_1.State.BEGAN))), [(0, react_native_reanimated_1.set)(touchAbsolute, props.horizontal ? x : y), (0, react_native_reanimated_1.set)(touchInit, touchAbsolute)]), (0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.eq)(state, react_native_gesture_handler_1.State.ACTIVE), [(0, react_native_reanimated_1.set)(activationDistance, (0, react_native_reanimated_1.sub)(props.horizontal ? x : y, touchInit)), (0, react_native_reanimated_1.set)(touchAbsolute, props.horizontal ? x : y)])]), (0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.neq)(panGestureState, state), [(0, react_native_reanimated_1.set)(panGestureState, state), (0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.or)((0, react_native_reanimated_1.eq)(state, react_native_gesture_handler_1.State.END), (0, react_native_reanimated_1.eq)(state, react_native_gesture_handler_1.State.CANCELLED), (0, react_native_reanimated_1.eq)(state, react_native_gesture_handler_1.State.FAILED)), onGestureRelease)])]);\n      }\n    }]);\n  }, [activationDistance, props.horizontal, panGestureState, disabled, onGestureRelease, touchAbsolute, touchInit]);\n  var onPanGestureEvent = (0, react_1.useMemo)(function () {\n    return (0, react_native_reanimated_1.event)([{\n      nativeEvent: function nativeEvent(_a) {\n        var x = _a.x,\n            y = _a.y;\n        return (0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.and)((0, react_native_reanimated_1.greaterThan)(activeIndexAnim, -1), (0, react_native_reanimated_1.eq)(panGestureState, react_native_gesture_handler_1.State.ACTIVE), (0, react_native_reanimated_1.not)(disabled)), [(0, react_native_reanimated_1.set)(touchAbsolute, props.horizontal ? x : y)]);\n      }\n    }]);\n  }, [activeIndexAnim, disabled, panGestureState, props.horizontal, touchAbsolute]);\n  var scrollHandler = (0, react_1.useMemo)(function () {\n    var webOnScroll = function webOnScroll(_a) {\n      var _b = _a.nativeEvent.contentOffset,\n          x = _b.x,\n          y = _b.y;\n      scrollOffset.setValue(props.horizontal ? x : y);\n    };\n\n    var mobileOnScroll = (0, react_native_reanimated_1.event)([{\n      nativeEvent: function nativeEvent(_a) {\n        var contentOffset = _a.contentOffset;\n        return (0, react_native_reanimated_1.block)([(0, react_native_reanimated_1.set)(scrollOffset, props.horizontal ? contentOffset.x : contentOffset.y), autoScrollNode]);\n      }\n    }]);\n    return constants_1.isWeb ? webOnScroll : mobileOnScroll;\n  }, [autoScrollNode, props.horizontal, scrollOffset]);\n  return react_1.default.createElement(draggableFlatListContext_1.default, {\n    activeKey: activeKey,\n    onDragEnd: onDragEnd,\n    keyExtractor: keyExtractor,\n    horizontal: !!props.horizontal\n  }, react_1.default.createElement(react_native_gesture_handler_1.PanGestureHandler, __assign({\n    ref: panGestureHandlerRef,\n    hitSlop: dragHitSlop,\n    onHandlerStateChange: onPanStateChange,\n    onGestureEvent: onPanGestureEvent,\n    simultaneousHandlers: props.simultaneousHandlers\n  }, dynamicProps), react_1.default.createElement(react_native_reanimated_1.default.View, {\n    style: props.containerStyle,\n    ref: containerRef,\n    onLayout: onContainerLayout,\n    onTouchEnd: onContainerTouchEnd,\n    onStartShouldSetResponderCapture: onContainerTouchStart,\n    onClick: onContainerTouchEnd\n  }, react_1.default.createElement(ScrollOffsetListener_1.default, {\n    scrollOffset: scrollOffset,\n    onScrollOffsetChange: function onScrollOffsetChange(_a) {\n      var _b;\n\n      var offset = _a[0];\n      scrollOffsetRef.current = offset;\n      (_b = props.onScrollOffsetChange) === null || _b === void 0 ? void 0 : _b.call(props, offset);\n    }\n  }), !!props.renderPlaceholder && react_1.default.createElement(PlaceholderItem_1.default, {\n    renderPlaceholder: props.renderPlaceholder\n  }), react_1.default.createElement(AnimatedFlatList, __assign({}, props, {\n    CellRendererComponent: CellRendererComponent_1.default,\n    ref: flatListRef,\n    onContentSizeChange: onListContentSizeChange,\n    scrollEnabled: !activeKey && scrollEnabled,\n    renderItem: renderItem,\n    extraData: extraData,\n    keyExtractor: keyExtractor,\n    onScroll: scrollHandler,\n    scrollEventThrottle: 16,\n    simultaneousHandlers: props.simultaneousHandlers,\n    removeClippedSubviews: false\n  })), react_1.default.createElement(react_native_reanimated_1.default.Code, {\n    dependencies: []\n  }, function () {\n    return (0, react_native_reanimated_1.block)([(0, react_native_reanimated_1.onChange)(isTouchActiveRef.current.native, (0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.not)(isTouchActiveRef.current.native), onGestureRelease))]);\n  }))));\n}\n\nfunction DraggableFlatList(props, ref) {\n  return react_1.default.createElement(propsContext_1.default, __assign({}, props), react_1.default.createElement(animatedValueContext_1.default, null, react_1.default.createElement(refContext_1.default, {\n    flatListRef: ref\n  }, react_1.default.createElement(DraggableFlatListInner, __assign({}, props)))));\n}\n\nexports.default = react_1.default.forwardRef(DraggableFlatList);","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__createBinding","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","__spreadArray","to","from","pack","l","ar","Array","slice","concat","__importDefault","exports","react_1","require","react_native_gesture_handler_1","react_native_reanimated_1","CellRendererComponent_1","constants_1","PlaceholderItem_1","RowItem_1","ScrollOffsetListener_1","useAutoScroll_1","useNode_1","propsContext_1","animatedValueContext_1","refContext_1","draggableFlatListContext_1","AnimatedFlatList","default","createAnimatedComponent","FlatList","DraggableFlatListInner","props","_a","useRefs","cellDataRef","containerRef","flatListRef","isTouchActiveRef","keyToIndexRef","panGestureHandlerRef","propsRef","scrollOffsetRef","_b","useAnimatedValues","activationDistance","activeCellOffset","activeCellSize","activeIndexAnim","containerSize","disabled","panGestureState","resetTouchedCell","scrollOffset","scrollViewSize","spacerIndexAnim","touchAbsolute","touchInit","_c","dragHitSlop","DEFAULT_PROPS","_d","scrollEnabled","_e","activationDistanceProp","_f","useState","activeKey","setActiveKey","keyExtractor","useCallback","item","index","current","Error","useLayoutEffect","data","forEach","d","key","set","drag","js","cellData","setValue","measurements","offset","size","onDragBegin","autoScrollNode","useAutoScroll","onContainerLayout","layout","nativeEvent","horizontal","width","height","onListContentSizeChange","w","h","onContentSizeChange","onContainerTouchStart","native","onContainerTouchEnd","dynamicProps","activeOffset","activeOffsetX","activeOffsetY","extraData","useMemo","renderItem","createElement","itemKey","resetHoverState","requestAnimationFrame","onRelease","onDragEnd","newData","splice","onGestureRelease","useNode","cond","greaterThan","onPanStateChange","event","state","x","y","block","and","neq","not","or","eq","State","BEGAN","ACTIVE","sub","END","CANCELLED","FAILED","onPanGestureEvent","scrollHandler","webOnScroll","contentOffset","mobileOnScroll","isWeb","PanGestureHandler","ref","hitSlop","onHandlerStateChange","onGestureEvent","simultaneousHandlers","View","style","containerStyle","onLayout","onTouchEnd","onStartShouldSetResponderCapture","onClick","onScrollOffsetChange","renderPlaceholder","CellRendererComponent","onScroll","scrollEventThrottle","removeClippedSubviews","Code","dependencies","onChange","DraggableFlatList","forwardRef"],"sources":["C:/Users/oplati/Desktop/expo dragdrop/node_modules/react-native-draggable-flatlist/lib/components/DraggableFlatList.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importStar(require(\"react\"));\nvar react_native_gesture_handler_1 = require(\"react-native-gesture-handler\");\nvar react_native_reanimated_1 = __importStar(require(\"react-native-reanimated\"));\nvar CellRendererComponent_1 = __importDefault(require(\"./CellRendererComponent\"));\nvar constants_1 = require(\"../constants\");\nvar PlaceholderItem_1 = __importDefault(require(\"./PlaceholderItem\"));\nvar RowItem_1 = __importDefault(require(\"./RowItem\"));\nvar ScrollOffsetListener_1 = __importDefault(require(\"./ScrollOffsetListener\"));\nvar useAutoScroll_1 = require(\"../hooks/useAutoScroll\");\nvar useNode_1 = require(\"../hooks/useNode\");\nvar propsContext_1 = __importDefault(require(\"../context/propsContext\"));\nvar animatedValueContext_1 = __importStar(require(\"../context/animatedValueContext\"));\nvar refContext_1 = __importStar(require(\"../context/refContext\"));\nvar draggableFlatListContext_1 = __importDefault(require(\"../context/draggableFlatListContext\"));\nvar AnimatedFlatList = react_native_reanimated_1.default.createAnimatedComponent(react_native_gesture_handler_1.FlatList);\nfunction DraggableFlatListInner(props) {\n    var _a = (0, refContext_1.useRefs)(), cellDataRef = _a.cellDataRef, containerRef = _a.containerRef, flatListRef = _a.flatListRef, isTouchActiveRef = _a.isTouchActiveRef, keyToIndexRef = _a.keyToIndexRef, panGestureHandlerRef = _a.panGestureHandlerRef, propsRef = _a.propsRef, scrollOffsetRef = _a.scrollOffsetRef;\n    var _b = (0, animatedValueContext_1.useAnimatedValues)(), activationDistance = _b.activationDistance, activeCellOffset = _b.activeCellOffset, activeCellSize = _b.activeCellSize, activeIndexAnim = _b.activeIndexAnim, containerSize = _b.containerSize, disabled = _b.disabled, panGestureState = _b.panGestureState, resetTouchedCell = _b.resetTouchedCell, scrollOffset = _b.scrollOffset, scrollViewSize = _b.scrollViewSize, spacerIndexAnim = _b.spacerIndexAnim, touchAbsolute = _b.touchAbsolute, touchInit = _b.touchInit;\n    var _c = props.dragHitSlop, dragHitSlop = _c === void 0 ? constants_1.DEFAULT_PROPS.dragHitSlop : _c, _d = props.scrollEnabled, scrollEnabled = _d === void 0 ? constants_1.DEFAULT_PROPS.scrollEnabled : _d, _e = props.activationDistance, activationDistanceProp = _e === void 0 ? constants_1.DEFAULT_PROPS.activationDistance : _e;\n    var _f = (0, react_1.useState)(null), activeKey = _f[0], setActiveKey = _f[1];\n    var keyExtractor = (0, react_1.useCallback)(function (item, index) {\n        if (propsRef.current.keyExtractor)\n            return propsRef.current.keyExtractor(item, index);\n        else\n            throw new Error(\"You must provide a keyExtractor to DraggableFlatList\");\n    }, [propsRef]);\n    (0, react_1.useLayoutEffect)(function () {\n        props.data.forEach(function (d, i) {\n            var key = keyExtractor(d, i);\n            keyToIndexRef.current.set(key, i);\n        });\n    }, [props.data, keyExtractor, keyToIndexRef]);\n    var drag = (0, react_1.useCallback)(function (activeKey) {\n        if (!isTouchActiveRef.current.js)\n            return;\n        var index = keyToIndexRef.current.get(activeKey);\n        var cellData = cellDataRef.current.get(activeKey);\n        if (cellData) {\n            activeCellOffset.setValue(cellData.measurements.offset - scrollOffsetRef.current);\n            activeCellSize.setValue(cellData.measurements.size);\n        }\n        var onDragBegin = propsRef.current.onDragBegin;\n        if (index !== undefined) {\n            spacerIndexAnim.setValue(index);\n            activeIndexAnim.setValue(index);\n            setActiveKey(activeKey);\n            onDragBegin === null || onDragBegin === void 0 ? void 0 : onDragBegin(index);\n        }\n    }, [\n        isTouchActiveRef,\n        keyToIndexRef,\n        cellDataRef,\n        propsRef,\n        activeCellOffset,\n        scrollOffsetRef,\n        activeCellSize,\n        spacerIndexAnim,\n        activeIndexAnim,\n    ]);\n    var autoScrollNode = (0, useAutoScroll_1.useAutoScroll)();\n    var onContainerLayout = function (_a) {\n        var layout = _a.nativeEvent.layout;\n        containerSize.setValue(props.horizontal ? layout.width : layout.height);\n    };\n    var onListContentSizeChange = function (w, h) {\n        var _a;\n        scrollViewSize.setValue(props.horizontal ? w : h);\n        (_a = props.onContentSizeChange) === null || _a === void 0 ? void 0 : _a.call(props, w, h);\n    };\n    var onContainerTouchStart = function () {\n        isTouchActiveRef.current.js = true;\n        isTouchActiveRef.current.native.setValue(1);\n        return false;\n    };\n    var onContainerTouchEnd = function () {\n        isTouchActiveRef.current.js = false;\n        isTouchActiveRef.current.native.setValue(0);\n    };\n    var dynamicProps = {};\n    if (activationDistanceProp) {\n        var activeOffset = [-activationDistanceProp, activationDistanceProp];\n        dynamicProps = props.horizontal\n            ? { activeOffsetX: activeOffset }\n            : { activeOffsetY: activeOffset };\n    }\n    var extraData = (0, react_1.useMemo)(function () { return ({\n        activeKey: activeKey,\n        extraData: props.extraData,\n    }); }, [activeKey, props.extraData]);\n    var renderItem = (0, react_1.useCallback)(function (_a) {\n        var item = _a.item, index = _a.index;\n        var key = keyExtractor(item, index);\n        if (index !== keyToIndexRef.current.get(key))\n            keyToIndexRef.current.set(key, index);\n        return (react_1.default.createElement(RowItem_1.default, { item: item, itemKey: key, renderItem: props.renderItem, drag: drag, extraData: props.extraData }));\n    }, [props.renderItem, props.extraData, drag, keyExtractor]);\n    var resetHoverState = (0, react_1.useCallback)(function () {\n        activeIndexAnim.setValue(-1);\n        spacerIndexAnim.setValue(-1);\n        touchAbsolute.setValue(0);\n        disabled.setValue(0);\n        requestAnimationFrame(function () {\n            setActiveKey(null);\n        });\n    }, [activeIndexAnim, spacerIndexAnim, touchAbsolute, disabled]);\n    var onRelease = function (_a) {\n        var _b;\n        var index = _a[0];\n        // This shouldn't be necessary but seems to fix a bug where sometimes\n        // native values wouldn't update\n        isTouchActiveRef.current.native.setValue(0);\n        (_b = props.onRelease) === null || _b === void 0 ? void 0 : _b.call(props, index);\n    };\n    var onDragEnd = (0, react_1.useCallback)(function (_a) {\n        var from = _a[0], to = _a[1];\n        var _b = propsRef.current, onDragEnd = _b.onDragEnd, data = _b.data;\n        if (onDragEnd) {\n            var newData = __spreadArray([], data, true);\n            if (from !== to) {\n                newData.splice(from, 1);\n                newData.splice(to, 0, data[from]);\n            }\n            onDragEnd({ from: from, to: to, data: newData });\n        }\n        resetHoverState();\n    }, [resetHoverState, propsRef]);\n    var onGestureRelease = (0, useNode_1.useNode)((0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.greaterThan)(activeIndexAnim, -1), [\n        (0, react_native_reanimated_1.set)(disabled, 1),\n        (0, react_native_reanimated_1.set)(isTouchActiveRef.current.native, 0),\n        (0, react_native_reanimated_1.call)([activeIndexAnim], onRelease),\n    ], [(0, react_native_reanimated_1.call)([activeIndexAnim], resetHoverState), resetTouchedCell]));\n    var onPanStateChange = (0, react_1.useMemo)(function () {\n        return (0, react_native_reanimated_1.event)([\n            {\n                nativeEvent: function (_a) {\n                    var state = _a.state, x = _a.x, y = _a.y;\n                    return (0, react_native_reanimated_1.block)([\n                        (0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.and)((0, react_native_reanimated_1.neq)(state, panGestureState), (0, react_native_reanimated_1.not)(disabled)), [\n                            (0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.or)((0, react_native_reanimated_1.eq)(state, react_native_gesture_handler_1.State.BEGAN), // Called on press in on Android, NOT on ios!\n                            // GestureState.BEGAN may be skipped on fast swipes\n                            (0, react_native_reanimated_1.and)((0, react_native_reanimated_1.eq)(state, react_native_gesture_handler_1.State.ACTIVE), (0, react_native_reanimated_1.neq)(panGestureState, react_native_gesture_handler_1.State.BEGAN))), [\n                                (0, react_native_reanimated_1.set)(touchAbsolute, props.horizontal ? x : y),\n                                (0, react_native_reanimated_1.set)(touchInit, touchAbsolute),\n                            ]),\n                            (0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.eq)(state, react_native_gesture_handler_1.State.ACTIVE), [\n                                (0, react_native_reanimated_1.set)(activationDistance, (0, react_native_reanimated_1.sub)(props.horizontal ? x : y, touchInit)),\n                                (0, react_native_reanimated_1.set)(touchAbsolute, props.horizontal ? x : y),\n                            ]),\n                        ]),\n                        (0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.neq)(panGestureState, state), [\n                            (0, react_native_reanimated_1.set)(panGestureState, state),\n                            (0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.or)((0, react_native_reanimated_1.eq)(state, react_native_gesture_handler_1.State.END), (0, react_native_reanimated_1.eq)(state, react_native_gesture_handler_1.State.CANCELLED), (0, react_native_reanimated_1.eq)(state, react_native_gesture_handler_1.State.FAILED)), onGestureRelease),\n                        ]),\n                    ]);\n                },\n            },\n        ]);\n    }, [\n        activationDistance,\n        props.horizontal,\n        panGestureState,\n        disabled,\n        onGestureRelease,\n        touchAbsolute,\n        touchInit,\n    ]);\n    var onPanGestureEvent = (0, react_1.useMemo)(function () {\n        return (0, react_native_reanimated_1.event)([\n            {\n                nativeEvent: function (_a) {\n                    var x = _a.x, y = _a.y;\n                    return (0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.and)((0, react_native_reanimated_1.greaterThan)(activeIndexAnim, -1), (0, react_native_reanimated_1.eq)(panGestureState, react_native_gesture_handler_1.State.ACTIVE), (0, react_native_reanimated_1.not)(disabled)), [(0, react_native_reanimated_1.set)(touchAbsolute, props.horizontal ? x : y)]);\n                },\n            },\n        ]);\n    }, [\n        activeIndexAnim,\n        disabled,\n        panGestureState,\n        props.horizontal,\n        touchAbsolute,\n    ]);\n    var scrollHandler = (0, react_1.useMemo)(function () {\n        // Web doesn't seem to like animated events\n        var webOnScroll = function (_a) {\n            var _b = _a.nativeEvent.contentOffset, x = _b.x, y = _b.y;\n            scrollOffset.setValue(props.horizontal ? x : y);\n        };\n        var mobileOnScroll = (0, react_native_reanimated_1.event)([\n            {\n                nativeEvent: function (_a) {\n                    var contentOffset = _a.contentOffset;\n                    return (0, react_native_reanimated_1.block)([\n                        (0, react_native_reanimated_1.set)(scrollOffset, props.horizontal ? contentOffset.x : contentOffset.y),\n                        autoScrollNode,\n                    ]);\n                },\n            },\n        ]);\n        return constants_1.isWeb ? webOnScroll : mobileOnScroll;\n    }, [autoScrollNode, props.horizontal, scrollOffset]);\n    return (react_1.default.createElement(draggableFlatListContext_1.default, { activeKey: activeKey, onDragEnd: onDragEnd, keyExtractor: keyExtractor, horizontal: !!props.horizontal },\n        react_1.default.createElement(react_native_gesture_handler_1.PanGestureHandler, __assign({ ref: panGestureHandlerRef, hitSlop: dragHitSlop, onHandlerStateChange: onPanStateChange, onGestureEvent: onPanGestureEvent, simultaneousHandlers: props.simultaneousHandlers }, dynamicProps),\n            react_1.default.createElement(react_native_reanimated_1.default.View, { style: props.containerStyle, ref: containerRef, onLayout: onContainerLayout, onTouchEnd: onContainerTouchEnd, onStartShouldSetResponderCapture: onContainerTouchStart, \n                //@ts-ignore\n                onClick: onContainerTouchEnd },\n                react_1.default.createElement(ScrollOffsetListener_1.default, { scrollOffset: scrollOffset, onScrollOffsetChange: function (_a) {\n                        var _b;\n                        var offset = _a[0];\n                        scrollOffsetRef.current = offset;\n                        (_b = props.onScrollOffsetChange) === null || _b === void 0 ? void 0 : _b.call(props, offset);\n                    } }),\n                !!props.renderPlaceholder && (react_1.default.createElement(PlaceholderItem_1.default, { renderPlaceholder: props.renderPlaceholder })),\n                react_1.default.createElement(AnimatedFlatList, __assign({}, props, { CellRendererComponent: CellRendererComponent_1.default, ref: flatListRef, onContentSizeChange: onListContentSizeChange, scrollEnabled: !activeKey && scrollEnabled, renderItem: renderItem, extraData: extraData, keyExtractor: keyExtractor, onScroll: scrollHandler, scrollEventThrottle: 16, simultaneousHandlers: props.simultaneousHandlers, removeClippedSubviews: false })),\n                react_1.default.createElement(react_native_reanimated_1.default.Code, { dependencies: [] }, function () {\n                    return (0, react_native_reanimated_1.block)([\n                        (0, react_native_reanimated_1.onChange)(isTouchActiveRef.current.native, (0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.not)(isTouchActiveRef.current.native), onGestureRelease)),\n                    ]);\n                })))));\n}\nfunction DraggableFlatList(props, ref) {\n    return (react_1.default.createElement(propsContext_1.default, __assign({}, props),\n        react_1.default.createElement(animatedValueContext_1.default, null,\n            react_1.default.createElement(refContext_1.default, { flatListRef: ref },\n                react_1.default.createElement(DraggableFlatListInner, __assign({}, props))))));\n}\n// Generic forwarded ref type assertion taken from:\n// https://fettblog.eu/typescript-react-generic-forward-refs/#option-1%3A-type-assertion\nexports.default = react_1.default.forwardRef(DraggableFlatList);\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}