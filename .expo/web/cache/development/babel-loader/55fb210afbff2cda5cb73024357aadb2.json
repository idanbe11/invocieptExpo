{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useCellTranslate = void 0;\n\nvar react_native_reanimated_1 = require(\"react-native-reanimated\");\n\nvar animatedValueContext_1 = require(\"../context/animatedValueContext\");\n\nvar refContext_1 = require(\"../context/refContext\");\n\nvar procs_1 = require(\"../procs\");\n\nvar useSpring_1 = require(\"./useSpring\");\n\nvar useNode_1 = require(\"../hooks/useNode\");\n\nvar draggableFlatListContext_1 = require(\"../context/draggableFlatListContext\");\n\nfunction useCellTranslate(_a) {\n  var cellIndex = _a.cellIndex,\n      cellSize = _a.cellSize,\n      cellOffset = _a.cellOffset;\n\n  var _b = (0, animatedValueContext_1.useAnimatedValues)(),\n      activeIndexAnim = _b.activeIndexAnim,\n      activeCellSize = _b.activeCellSize,\n      hoverAnim = _b.hoverAnim,\n      scrollOffset = _b.scrollOffset,\n      spacerIndexAnim = _b.spacerIndexAnim,\n      placeholderOffset = _b.placeholderOffset,\n      isDraggingCell = _b.isDraggingCell,\n      resetTouchedCell = _b.resetTouchedCell,\n      disabled = _b.disabled;\n\n  var animationConfigRef = (0, refContext_1.useRefs)().animationConfigRef;\n  var onDragEnd = (0, draggableFlatListContext_1.useDraggableFlatListContext)().onDragEnd;\n  var cellSpring = (0, useSpring_1.useSpring)({\n    config: animationConfigRef.current\n  });\n  var clock = cellSpring.clock,\n      state = cellSpring.state,\n      config = cellSpring.config;\n  var isAfterActive = (0, react_native_reanimated_1.useValue)(0);\n  var isClockRunning = (0, useNode_1.useNode)((0, react_native_reanimated_1.clockRunning)(clock));\n  var runSpring = (0, useNode_1.useNode)((0, procs_1.springFill)(clock, state, config));\n  var cellHoverOffset = (0, useNode_1.useNode)((0, react_native_reanimated_1.add)(hoverAnim, scrollOffset));\n  var onFinished = (0, useNode_1.useNode)((0, react_native_reanimated_1.cond)(isClockRunning, [(0, react_native_reanimated_1.stopClock)(clock), (0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.eq)(cellIndex, activeIndexAnim), [resetTouchedCell, (0, react_native_reanimated_1.call)([activeIndexAnim, spacerIndexAnim], onDragEnd)])]));\n  var prevTrans = (0, react_native_reanimated_1.useValue)(0);\n  var prevSpacerIndex = (0, react_native_reanimated_1.useValue)(-1);\n  var prevIsDraggingCell = (0, react_native_reanimated_1.useValue)(0);\n  var cellTranslate = (0, useNode_1.useNode)((0, procs_1.setupCell)(cellIndex, cellSize, cellOffset, isAfterActive, prevTrans, prevSpacerIndex, activeIndexAnim, activeCellSize, cellHoverOffset, spacerIndexAnim, config.toValue, state.position, state.time, state.finished, runSpring, onFinished, isDraggingCell, placeholderOffset, prevIsDraggingCell, clock, disabled));\n  (0, react_native_reanimated_1.useCode)(function () {\n    return (0, react_native_reanimated_1.block)([(0, react_native_reanimated_1.onChange)(cellTranslate, []), (0, react_native_reanimated_1.onChange)(prevTrans, []), (0, react_native_reanimated_1.onChange)(cellSize, []), (0, react_native_reanimated_1.onChange)(cellOffset, [])]);\n  }, []);\n  return state.position;\n}\n\nexports.useCellTranslate = useCellTranslate;","map":{"version":3,"names":["Object","defineProperty","exports","value","useCellTranslate","react_native_reanimated_1","require","animatedValueContext_1","refContext_1","procs_1","useSpring_1","useNode_1","draggableFlatListContext_1","_a","cellIndex","cellSize","cellOffset","_b","useAnimatedValues","activeIndexAnim","activeCellSize","hoverAnim","scrollOffset","spacerIndexAnim","placeholderOffset","isDraggingCell","resetTouchedCell","disabled","animationConfigRef","useRefs","onDragEnd","useDraggableFlatListContext","cellSpring","useSpring","config","current","clock","state","isAfterActive","useValue","isClockRunning","useNode","clockRunning","runSpring","springFill","cellHoverOffset","add","onFinished","cond","stopClock","eq","call","prevTrans","prevSpacerIndex","prevIsDraggingCell","cellTranslate","setupCell","toValue","position","time","finished","useCode","block","onChange"],"sources":["C:/Users/oplati/Desktop/expo dragdrop/node_modules/react-native-draggable-flatlist/lib/hooks/useCellTranslate.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useCellTranslate = void 0;\nvar react_native_reanimated_1 = require(\"react-native-reanimated\");\nvar animatedValueContext_1 = require(\"../context/animatedValueContext\");\nvar refContext_1 = require(\"../context/refContext\");\nvar procs_1 = require(\"../procs\");\nvar useSpring_1 = require(\"./useSpring\");\nvar useNode_1 = require(\"../hooks/useNode\");\nvar draggableFlatListContext_1 = require(\"../context/draggableFlatListContext\");\nfunction useCellTranslate(_a) {\n    var cellIndex = _a.cellIndex, cellSize = _a.cellSize, cellOffset = _a.cellOffset;\n    var _b = (0, animatedValueContext_1.useAnimatedValues)(), activeIndexAnim = _b.activeIndexAnim, activeCellSize = _b.activeCellSize, hoverAnim = _b.hoverAnim, scrollOffset = _b.scrollOffset, spacerIndexAnim = _b.spacerIndexAnim, placeholderOffset = _b.placeholderOffset, isDraggingCell = _b.isDraggingCell, resetTouchedCell = _b.resetTouchedCell, disabled = _b.disabled;\n    var animationConfigRef = (0, refContext_1.useRefs)().animationConfigRef;\n    var onDragEnd = (0, draggableFlatListContext_1.useDraggableFlatListContext)().onDragEnd;\n    var cellSpring = (0, useSpring_1.useSpring)({ config: animationConfigRef.current });\n    var clock = cellSpring.clock, state = cellSpring.state, config = cellSpring.config;\n    var isAfterActive = (0, react_native_reanimated_1.useValue)(0);\n    var isClockRunning = (0, useNode_1.useNode)((0, react_native_reanimated_1.clockRunning)(clock));\n    var runSpring = (0, useNode_1.useNode)((0, procs_1.springFill)(clock, state, config));\n    // Even though this is the same value as hoverOffset passed via context\n    // the android context value lags behind the actual value on autoscroll\n    var cellHoverOffset = (0, useNode_1.useNode)((0, react_native_reanimated_1.add)(hoverAnim, scrollOffset));\n    var onFinished = (0, useNode_1.useNode)((0, react_native_reanimated_1.cond)(isClockRunning, [\n        (0, react_native_reanimated_1.stopClock)(clock),\n        (0, react_native_reanimated_1.cond)((0, react_native_reanimated_1.eq)(cellIndex, activeIndexAnim), [\n            resetTouchedCell,\n            (0, react_native_reanimated_1.call)([activeIndexAnim, spacerIndexAnim], onDragEnd),\n        ]),\n    ]));\n    var prevTrans = (0, react_native_reanimated_1.useValue)(0);\n    var prevSpacerIndex = (0, react_native_reanimated_1.useValue)(-1);\n    var prevIsDraggingCell = (0, react_native_reanimated_1.useValue)(0);\n    var cellTranslate = (0, useNode_1.useNode)((0, procs_1.setupCell)(cellIndex, cellSize, cellOffset, isAfterActive, prevTrans, prevSpacerIndex, activeIndexAnim, activeCellSize, cellHoverOffset, spacerIndexAnim, \n    //@ts-ignore\n    config.toValue, state.position, state.time, state.finished, runSpring, onFinished, isDraggingCell, placeholderOffset, prevIsDraggingCell, clock, disabled));\n    // This is a workaround required to continually evaluate values\n    (0, react_native_reanimated_1.useCode)(function () {\n        return (0, react_native_reanimated_1.block)([\n            (0, react_native_reanimated_1.onChange)(cellTranslate, []),\n            (0, react_native_reanimated_1.onChange)(prevTrans, []),\n            (0, react_native_reanimated_1.onChange)(cellSize, []),\n            (0, react_native_reanimated_1.onChange)(cellOffset, []),\n        ]);\n    }, []);\n    return state.position;\n}\nexports.useCellTranslate = useCellTranslate;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}